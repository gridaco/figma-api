# ============================================================================
# MANUALLY AUTHORED FILE - DO NOT AUTO-GENERATE
# ============================================================================
#
# This file contains manual schema overrides for Rust/Serde compatibility.
# It is manually authored and maintained by developers to fix specific issues
# that cannot be handled automatically by the pipeline scripts.
#
# When to modify this file:
#   - When a schema causes Rust deserialization failures
#   - When a schema needs special handling for Serde compatibility
#   - When discriminator mappings need to be corrected
#   - When enum values need to be added or corrected
#
# This file is processed by pipe_rust_rm_type.py during the pipeline.
# Changes to this file will affect the generated Rust code.
#
# Author: Universe (universe@grida.co)
# Last updated: 2025-06-08
# ============================================================================

components:
  responses:
    GetImageFillsResponse:
      description: Response from the GET /v1/files/{file_key}/images endpoint.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/GetImageFillsResponseBody"
  schemas:
    GetImageFillsResponseBody:
      type: object
      properties:
        meta:
          $ref: "#/components/schemas/GetImageFillsMeta"
      required:
        - meta
    HasLayoutTrait:
      properties:
        layoutGrow:
          type: number
          description: This property is applicable only for direct children of 
            auto-layout frames, ignored otherwise. Determines whether a layer 
            should stretch along the parent's primary axis. A `0` corresponds to
            a fixed size and `1` corresponds to stretch.
          default: 0

    Effect:
      oneOf:
      - $ref: "#/components/schemas/DropShadowEffect"
      - $ref: "#/components/schemas/InnerShadowEffect"
      - $ref: "#/components/schemas/LayerBlurEffect"
      - $ref: "#/components/schemas/BackgroundBlurEffect"
      - $ref: "#/components/schemas/TextureEffect"
      - $ref: "#/components/schemas/NoiseEffect"
      discriminator:
        propertyName: type
        mapping:
          DROP_SHADOW: "#/components/schemas/DropShadowEffect"
          INNER_SHADOW: "#/components/schemas/InnerShadowEffect"
          LAYER_BLUR: "#/components/schemas/LayerBlurEffect"
          BACKGROUND_BLUR: "#/components/schemas/BackgroundBlurEffect"
          TEXTURE: "#/components/schemas/TextureEffect"
          NOISE: "#/components/schemas/NoiseEffect"

    LayerBlurEffect:
          type: object
          properties:
            visible:
              type: boolean
              description: Whether this effect is visible
            radius:
              type: number
              description: The blur radius
          required:
            - type
            - visible
            - radius

    BackgroundBlurEffect:
      type: object
      properties:
        visible:
          type: boolean
          description: Whether this effect is visible
        radius:
          type: number
          description: The blur radius
      required:
        - type
        - visible
        - radius
    TextureEffect:
          type: object
          description: A texture effect
          properties:
            noiseSize:
              type: number
              description: The size of the texture effect
            radius:
              type: number
              description: The radius of the texture effect
            clipToShape:
              type: boolean
              description: Whether the texture is clipped to the shape
          required:
          - noiseSize
          - radius
          - clipToShape
    BaseNoiseEffect:
      type: object
      description: A noise effect
      properties:
        blendMode:
          $ref: "#/components/schemas/BlendMode"
          description: Blend mode of the noise effect
        noiseSize:
          type: number
          description: The size of the noise effect
        density:
          type: number
          description: The density of the noise effect
      required:
      - noiseSize
      - density
      - blendMode
    NoiseEffect:
      allOf:
        - $ref: "#/components/schemas/BaseNoiseEffect"
        - type: object
          properties:
            noiseType:
              type: string
              enum:
                - MONOTONE
                - MULTITONE
                - DUOTONE
            opacity:
              type: number
            secondaryColor:
              $ref: "#/components/schemas/RGBA"
          required:
            - noiseType